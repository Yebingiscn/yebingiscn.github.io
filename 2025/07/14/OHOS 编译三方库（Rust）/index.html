<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>OHOS 编译三方库（Rust） | 叶绿素b的博客</title><meta name="author" content="叶绿素b"><meta name="copyright" content="叶绿素b"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="引言最近业余时间都在做一个鸿蒙 NEXT 的视频项目（流心视频），大家都知道鸿蒙 NEXT 是一个基于 arkts 的全新系统。Arkts 生态还是比较原始，特别是音视频开发领域，如果只是依赖系统提供组件开发很容易出现这也不支持、那也不支持的情况。比如系统播放器不支持杜比、DTS 音轨输出，这就需要我们引入三方库中的第三方播放器，比如 ijkplayer，但是他们也都有各种各样的问题，在开发中就不">
<meta property="og:type" content="article">
<meta property="og:title" content="OHOS 编译三方库（Rust）">
<meta property="og:url" content="https://yebingiscn.github.io/2025/07/14/OHOS%20%E7%BC%96%E8%AF%91%E4%B8%89%E6%96%B9%E5%BA%93%EF%BC%88Rust%EF%BC%89/index.html">
<meta property="og:site_name" content="叶绿素b的博客">
<meta property="og:description" content="引言最近业余时间都在做一个鸿蒙 NEXT 的视频项目（流心视频），大家都知道鸿蒙 NEXT 是一个基于 arkts 的全新系统。Arkts 生态还是比较原始，特别是音视频开发领域，如果只是依赖系统提供组件开发很容易出现这也不支持、那也不支持的情况。比如系统播放器不支持杜比、DTS 音轨输出，这就需要我们引入三方库中的第三方播放器，比如 ijkplayer，但是他们也都有各种各样的问题，在开发中就不">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yebingiscn.github.io/img/shuita.jpg">
<meta property="article:published_time" content="2025-07-14T09:18:53.000Z">
<meta property="article:modified_time" content="2025-12-23T11:38:56.896Z">
<meta property="article:author" content="叶绿素b">
<meta property="article:tag" content="学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yebingiscn.github.io/img/shuita.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "OHOS 编译三方库（Rust）",
  "url": "https://yebingiscn.github.io/2025/07/14/OHOS%20%E7%BC%96%E8%AF%91%E4%B8%89%E6%96%B9%E5%BA%93%EF%BC%88Rust%EF%BC%89/",
  "image": "https://yebingiscn.github.io/img/shuita.jpg",
  "datePublished": "2025-07-14T09:18:53.000Z",
  "dateModified": "2025-12-23T11:38:56.896Z",
  "author": [
    {
      "@type": "Person",
      "name": "叶绿素b",
      "url": "https://yebingiscn.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/shuita.jpg"><link rel="canonical" href="https://yebingiscn.github.io/2025/07/14/OHOS%20%E7%BC%96%E8%AF%91%E4%B8%89%E6%96%B9%E5%BA%93%EF%BC%88Rust%EF%BC%89/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'OHOS 编译三方库（Rust）',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="叶绿素b的博客" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      if ($loadingBox.classList.contains('loaded')) return
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()

  if (document.readyState === 'complete') {
    preloader.endLoading()
  } else {
    window.addEventListener('load', preloader.endLoading)
    document.addEventListener('DOMContentLoaded', preloader.endLoading)
    // Add timeout protection: force end after 7 seconds
    setTimeout(preloader.endLoading, 7000)
  }

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(/img/background.jpg);"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/deindex.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/friend_404.gif" alt="Logo"><span class="site-name">叶绿素b的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">OHOS 编译三方库（Rust）</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">OHOS 编译三方库（Rust）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-14T09:18:53.000Z" title="发表于 2025-07-14 17:18:53">2025-07-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-12-23T11:38:56.896Z" title="更新于 2025-12-23 19:38:56">2025-12-23</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">1.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>6分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>最近业余时间都在做一个鸿蒙 NEXT 的视频项目（流心视频），大家都知道鸿蒙 NEXT 是一个基于 arkts 的全新系统。Arkts 生态还是比较原始，特别是音视频开发领域，如果只是依赖系统提供组件开发很容易出现这也不支持、那也不支持的情况。比如系统播放器不支持杜比、DTS 音轨输出，这就需要我们引入三方库中的第三方播放器，比如 ijkplayer，但是他们也都有各种各样的问题，在开发中就不可能只局限于 arkts 表层必须深入底层，自己造轮子。（其实是把别人造的轮子搬过来）</p>
<p>播放器难度还是很大的，涉及到方方面面，搬轮子不是件很容易的事情，这次就从一个简单的字幕库出发，学习分享下如何把别人的轮子搬到 arkts 上。</p>
<h2 id="项目概述"><a href="#项目概述" class="headerlink" title="项目概述"></a>项目概述</h2><p>这是一个字幕库，是基于 rsubs-lib 开发，已经是上架 ohos 中心仓的（<a target="_blank" rel="noopener" href="https://ohpm.openharmony.cn/#/cn/home">OpenHarmony三方库中心仓</a>），但是拿下来发现解析的都是 <code>[]</code>，好在原作者开源了源码（<a target="_blank" rel="noopener" href="https://atomgit.com/wysp2012/ohos_napi/">ohos_napi · AtomGit_开放原子开源基金会代码托管平台</a>）, 找 AI 修改了下可能有问题的地方（原因是对字幕时间的计算有问题），把 rsubs-lib 版本从 0.32 升级 0.33。接下来只要把这个编译成 so 库就好了（其他的原作者都写好了，直接 CV 就完事）。</p>
<p>下面我们开始编译流程。</p>
<h2 id="编译环境选择"><a href="#编译环境选择" class="headerlink" title="编译环境选择"></a>编译环境选择</h2><p>编译必须在 Linux 环境下，一般是 WSL、Docker 或者虚拟机，这里我们方便点就选择虚拟机，系统就选择 Ubuntu 就可以了。</p>
<p>WSL 有如下缺点：</p>
<ol>
<li>因为是映射 Windows 路径，所以编译会很麻烦，会找不到路径，报错，哪怕传到子目录里一样会有问题</li>
<li>不能使用 Deveco Studio 的 NDK，因为那是给 Windows 环境准备的</li>
<li>下载 SDK 在 Windows 下解压很容易把 clang 这些搞成文本文件了</li>
<li>下载 Rust 工具链特别慢，不挂梯子下载很容易下载失败</li>
</ol>
<p>虚拟机也有缺点：</p>
<ol>
<li>VMware Workstation 官方网站非常垃圾，感觉是故意设计的，username 是填邮箱号</li>
<li>Ubuntu 启动需要安装，记得不要先选择联网，不然安装会出错，没走完的是临时系统什么都干不了的，不要按重启按钮，会直接挂掉</li>
<li>想要拖拽、共享文件夹功能需要安装 VMware tools，这个需要安装好正式系统后才能安装<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update # 这个是检查是否有可用升级</span><br><span class="line">sudo apt install open-vm-tools open-vm-tools-desktop # 如果是桌面版，需要安装-desktop包，安装好重启虚拟机即可</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="编译流程"><a href="#编译流程" class="headerlink" title="编译流程"></a>编译流程</h2><blockquote>
<p>这里在 WSL 注明了下，虚拟机跳过注明的就可以</p>
</blockquote>
<p>（WSL）打开 powershell，输入之后等待安装重启就可以。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wsl --install</span><br><span class="line"></span><br><span class="line"># 指定下 wsl2 性能更好</span><br><span class="line">wsl --set-default-version 2</span><br></pre></td></tr></table></figure>

<p>（WSL）安装 Linux 发行版</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查看可用分发</span><br><span class="line">wsl.exe --list --online</span><br><span class="line"></span><br><span class="line"># 选择 Ubuntu</span><br><span class="line">wsl --install -d Ubuntu-22.04</span><br></pre></td></tr></table></figure>

<p>接下来可以阅读下这个文档 <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/rustc/platform-support/openharmony.html">*-linux-ohos - rustc 书</a> </p>
<p>这是 rust 官方的交叉编译文档，可以照着来，也可以喂给 AI 让 AI 生成步骤。</p>
<p>跳转到编译存储的目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /mnt/d/Code/ohos_napi/rust/subtitles</span><br></pre></td></tr></table></figure>

<p>安装 rust 相关链</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --proto &#x27;=https&#x27; --tlsv1.2 -ssf https://sh.rustup.rs | sh</span><br></pre></td></tr></table></figure>

<p>安装鸿蒙 target</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装鸿蒙支持的 target</span><br><span class="line">rustup target add aarch64-unknown-linux-ohos armv7-unknown-linux-ohos x86_64-unknown-linux-ohos</span><br></pre></td></tr></table></figure>

<p>安装 C 编译器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt install build-essential</span><br><span class="line"># build-essential 包含了 gcc, g++, make, libc-dev 等</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://repo.huaweicloud.com/openharmony/os/6.0-Release/ohos-sdk-windows_linux-public.tar.gz">*鸿蒙6.0 SDK</a> </p>
<p><a target="_blank" rel="noopener" href="https://gitcode.com/openharmony/docs">*OpenHarmony 文档</a></p>
<blockquote>
<p><strong>OpenHarmony 文档版本分支说明</strong>里点进去对应版本号，拉到最下面有个从<strong>镜像站点获取</strong> 选<strong>标准系统 public</strong></p>
</blockquote>
<p>下载解压，选择 Linux 文件里的 NDK 组件，把 NDK 路径配置到 Linux 环境里</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 打开配置文件</span><br><span class="line">nano ~/.bashrc</span><br><span class="line"></span><br><span class="line"># 在文件末尾添加，注意添加到native上一层的路径就好，native及下面的编译文件路径会自动加的</span><br><span class="line">export OHOS_NDK_HOME=&quot;/mnt/c/Users/a1309/AppData/Local/OpenHarmony/Sdk/20/linux&quot;</span><br><span class="line"></span><br><span class="line"># 先按 ctrl + s 保存，再按 ctrl + x 退出</span><br><span class="line"></span><br><span class="line"># 保存后刷新使配置生效</span><br><span class="line">source ~/.bashrc</span><br><span class="line"></span><br><span class="line"># 查看下路径是否生效</span><br><span class="line">ls $OHOS_NDK_HOME</span><br></pre></td></tr></table></figure>

<p>（WSL）WSL 下是 Windows 路径，会遇到地址转换的问题，其中一个问题就是找不到 <code>clang not found</code>，这里就需要 <code>ls</code> 一下 clang 的路径看对不对，<code>clang路径 --version</code> 看看能不能打印出信息，以及查看 <code>clang</code> 是不是变成了解压成了文本文件</p>
<p>（WSL）WSL 下会出现回车符的问题，需要优化下路径</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 清理构建缓存</span><br><span class="line">cargo clean</span><br><span class="line"></span><br><span class="line"># 设置环境变量时去除回车符</span><br><span class="line">export OHOS_NDK_HOME=$(echo &quot;/mnt/c/Users/a1309/AppData/Local/OpenHarmony/Sdk/20/native&quot; | tr -d &#x27;\r&#x27;)</span><br></pre></td></tr></table></figure>

<p>虚拟机下面中文环境会出现中文路径的问题，注意不要直接命令改，会导致 Ubuntu 文件系统崩溃只能重启，直接使用 English 环境是最好的。（用户名记得不要用中文）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 危险命令，直接去图形界面改成英文就好</span><br><span class="line">mv ~/下载 ~/Downloads</span><br></pre></td></tr></table></figure>

<p>这里可能有个问题是没有 <code>clang</code> 的执行权限，需要添加下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 进入 NDK 的 bin 目录</span><br><span class="line">cd ~/下载/linux/native-linux-x64-6.0.0.47-Beta1/native/llvm/bin</span><br><span class="line"></span><br><span class="line"># 给所有可执行文件添加权限</span><br><span class="line">chmod +x clang* llvm* ld.lld</span><br><span class="line"></span><br><span class="line"># 递归修复整个工具链的权限</span><br><span class="line">find ~/下载/linux/native-linux-x64-6.0.0.47-Beta1 -type f -executable -exec chmod +x &#123;&#125; \;</span><br><span class="line"></span><br><span class="line"># 检查 clang 权限</span><br><span class="line">ls -l ~/下载/linux/native-linux-x64-6.0.0.47-Beta1/native/llvm/bin/clang</span><br><span class="line"></span><br><span class="line"># 应有类似输出：</span><br><span class="line"># -rwxr-xr-x 1 user user ... clang</span><br><span class="line"># 注意第一列必须有 &#x27;x&#x27;（执行权限）</span><br></pre></td></tr></table></figure>

<p>安装 ohrs</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo install ohrs</span><br></pre></td></tr></table></figure>

<p>编译 Rust</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ohrs build --release</span><br></pre></td></tr></table></figure>

<p>应该就成功了，能在 <code>dist</code> 目录下看到编译出来的 so 包</p>
<p>如果是用的自己的 Rust 项目，需要打包 Rust</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo package --allow-dirty</span><br></pre></td></tr></table></figure>

<p>如果发现生成速度特别快，没有读条，出来的 so 包还是之前的，需要执行如下命令，再执行编译命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo clean</span><br></pre></td></tr></table></figure>

<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># 更新</span><br><span class="line">sudo apt upgrade </span><br><span class="line"></span><br><span class="line"># 删除不再需要的依赖包 </span><br><span class="line">sudo apt autoremove </span><br><span class="line"></span><br><span class="line"># 清理下载的安装包缓存</span><br><span class="line">sudo apt clean </span><br><span class="line"></span><br><span class="line"># 查看磁盘分区和使用情况 </span><br><span class="line">df -h </span><br><span class="line"></span><br><span class="line"># 查看根目录下各文件夹大小 </span><br><span class="line">sudo du -sh /* 2&gt;/dev/null | sort -hr </span><br><span class="line"></span><br><span class="line"># 检查是否有旧内核占用空间 </span><br><span class="line">dpkg -l | grep linux-image</span><br><span class="line"></span><br><span class="line"># 查找并删除大文件</span><br><span class="line">sudo find /var/log -type f -name &quot;*.log&quot; -size +100M 2&gt;/dev/null </span><br><span class="line"></span><br><span class="line"># 查看当前内核版本  </span><br><span class="line">uname -r </span><br><span class="line"></span><br><span class="line"># 查看所有已安装内核  </span><br><span class="line">dpkg --list | grep linux-image </span><br><span class="line"></span><br><span class="line"># 删除旧内核（保留当前和最新一个即可） </span><br><span class="line">sudo apt remove linux-image-版本号 </span><br><span class="line"></span><br><span class="line"># 查找大于 100 MB的文件（从根目录开始）</span><br><span class="line">sudo find / -type f -size +100M -exec ls -lh &#123;&#125; \; 2&gt;/dev/null </span><br><span class="line"></span><br><span class="line"># 删除拖放缓存文件 </span><br><span class="line">rm -rf ~/.cache/vmware/drag_and_drop/* </span><br><span class="line"></span><br><span class="line"># 删除损坏的 NDK </span><br><span class="line">rm -rf ~/Downloads/linux/native-linux-x64-6.0.0.47-Beta1</span><br></pre></td></tr></table></figure>

<h2 id="Cargo-apt-curl-的对比"><a href="#Cargo-apt-curl-的对比" class="headerlink" title="Cargo apt curl 的对比"></a>Cargo apt curl 的对比</h2><table>
<thead>
<tr>
<th>工具</th>
<th>类型</th>
<th>作用域</th>
<th>典型用途</th>
<th>是否影响系统</th>
</tr>
</thead>
<tbody><tr>
<td><code>apt</code></td>
<td>系统包管理器</td>
<td>操作系统级别</td>
<td>安装&#x2F;管理系统软件</td>
<td>✅ 全局影响</td>
</tr>
<tr>
<td><code>cargo</code></td>
<td>语言工具链</td>
<td>项目级别</td>
<td>构建&#x2F;管理 Rust 项目及依赖</td>
<td>❌ 局部影响</td>
</tr>
<tr>
<td><code>curl</code></td>
<td>网络工具</td>
<td>数据交互</td>
<td>下载文件&#x2F;调用 API&#x2F;传输数据</td>
<td>❌ 无影响</td>
</tr>
</tbody></table>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://yebingiscn.github.io">叶绿素b</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://yebingiscn.github.io/2025/07/14/OHOS%20%E7%BC%96%E8%AF%91%E4%B8%89%E6%96%B9%E5%BA%93%EF%BC%88Rust%EF%BC%89/">https://yebingiscn.github.io/2025/07/14/OHOS%20%E7%BC%96%E8%AF%91%E4%B8%89%E6%96%B9%E5%BA%93%EF%BC%88Rust%EF%BC%89/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://yebingiscn.github.io" target="_blank">叶绿素b的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0/">学习</a></div><div class="post-share"><div class="social-share" data-image="/img/shuita.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/08/21/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a><a class="pagination-related" href="/2025/03/17/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%8B%9C%E5%B1%B1%E6%8F%92%E6%9B%B2/" title="记一次有意思的拜山插曲"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">记一次有意思的拜山插曲</div></div><div class="info-2"><div class="info-item-1">过程昨天回乡拜山，在大概第二座山的时候，山坡下正在清理墓地，我在山坡上小路旁边看着，二婶从小路走过后，跟了个女生引起了我的注意，原因是她好像是我们拜山队伍里的，但是我对她没有印象，这个女生小小个梳个刘海马尾，穿着白色鞋子。 当时我想“也许这是哪个亲戚吧。”刚好这次有远房亲戚来扫墓，后面也没留意这个人，直到兜兜转转几个墓地下山的时候，我的鞋带掉了，我被迫停在路边绑鞋带。绑好之后刚好我二婶刚好走过，这个女生跟在我二婶后。我便在我二婶后面跟下山。 下山下到一半，这个女生突然走到我旁边还走得比较快（是要超过我），我有点疑惑，不想一个年纪比较大得女生用吐槽的语气对她用普通话说“找了你好久，叫你没反应跟着别人走了（大意）”，她窜进去了一群准备对着一个墓地扫墓的人，从后面钻到了年纪比较大女性旁边，另一个年轻的高高的男生看到她到旁边了拍了拍她说“你怎么这么优秀啊”。然而她什么也没说，只是一脸尴尬（大概是吧），当时我也只是想：哦居然是其他队伍里混到我们队里来的。 细思 也许是我们太无聊了  后面想想感觉不对啊，说普通话那肯定人生地不熟肯定跟着熟悉的人走啊，无论是她那边男生还是女生都不用干什么的，很...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/08/13/Ak%E7%9A%84%E8%8E%B7%E5%8F%96%E6%96%B9%E6%B3%95/" title="Ak的获取方法"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-13</div><div class="info-item-2">Ak的获取方法</div></div><div class="info-2"><div class="info-item-1">Ak 的获取方法最近在做百度地图 API 相关的项目，需要用到获取安卓的 AK，简单来说就是一种密钥。但是获取的时候踩了些坑，在这里书写下怎么避免。  首先要注意自己的.android 路径，像我的其实放在 D 盘而不是和百度给的实例一样放在 C 盘 要带上 jdk 路径和-list -v -keystore debug.keystore。这里如果按照百度上来则是**巨坑 密码是 android  </div></div></div></a><a class="pagination-related" href="/2020/09/10/C++%E6%97%B6%E9%97%B4%E6%9A%82%E5%81%9C%E8%AF%AD%E5%8F%A5%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="C++时间暂停语句与数据结构"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-10</div><div class="info-item-2">C++时间暂停语句与数据结构</div></div><div class="info-2"><div class="info-item-1"> 最近在学数据结构，对时间频度和时间复杂度无力吐槽，现在讲到了顺序表。顺序表之类的还是配合指针感觉会比较香。   时间复杂度时间复杂度只学了一个 for 函数的，总的来说就是有几个 for 循环就是 O(N)的几次方，如果参加大学生程序设计大赛那估计要学一下其他的循环比如说 while 循环。学完之后，我觉得要重新学一下其他的循环，复习一下  顺序表，没什么好说的学好指针  C++程序暂停我目前学了两种方法 1system(&quot;pause&quot;)  实现了以后会暂停，要按 Enter 键才能下一步sleep 函数要有一个头文件 1include&lt;windows.h&gt;  然后要写的里面写 sleep 函数比如说 Sleep(time) &#x2F;&#x2F;S 要大写，time 里面写数字，1 就是 1 毫秒   </div></div></div></a><a class="pagination-related" href="/2021/09/09/HTML%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01/" title="HTML学习笔记1"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-09</div><div class="info-item-2">HTML学习笔记1</div></div><div class="info-2"><div class="info-item-1"> 不知不觉就大三了，博客也鸽了很久，还是写写，当个参考，定个小目标吧，两天更新一篇，最近在学 JSP 里的 HTML，我发现我不是很熟，在这里整理一下很多内容都来自蓝桥课程的 HTML 教程，推荐学习！   标签 &lt;p&gt;这是个标签&lt;/p&gt; 标题 标题有六种，他们的主要区别是字体大小不同123456&lt;h1&gt;我是一级标题&lt;/h1&gt;&lt;h2&gt;我是二级标题&lt;/h2&gt;&lt;h3&gt;我是三级标题&lt;/h3&gt;&lt;h4&gt;我是四级标题&lt;/h4&gt;&lt;h5&gt;我是五级标题&lt;/h5&gt;&lt;h6&gt;我是六级标题&lt;/h6&gt; 图片 图片放置方式：&lt;img src=&quot;图片地址&quot;/&gt;  跳转 &lt;a href=&quot;https://www.xxx.cn/&quot;&gt;xxx&lt;/a&gt; 填充 &lt;div style=&quot;width:200px;height:200px;background:pink&q...</div></div></div></a><a class="pagination-related" href="/2021/02/24/C++%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0/" title="C++基础练习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-24</div><div class="info-item-2">C++基础练习</div></div><div class="info-2"><div class="info-item-1"> 用代码实现从 1+2*3&#x2F;4 的运算过程及结果，并打印  用代码实现变量 a 和变量 b 值的交换，并打印最终 a 和 b 的值  随意输入两个数，比较第一个数和第二个数的大小并打印。  随意输入一个数，判断这个数是奇数还是偶数，并打印。  判断一个数字是否能被 5 和 6 同时整除，并打印。  输入一个 0-100 的分数，如果不是 0-100 之间，打印分数无效，根据分数等级打印出“不及格（0-59）”“及格（60-79）”“优秀（80-100）”  随意输入三个不相同的数字，求出三个数中的最小值并打印。  使用 while 循环打印出 1-100 中 3 的倍数。  计算 1+2+3+4+…+100 的总和并打印。  编一个程序，输出 1-100 中能够整除 3 但不能整除 5 的数，并统计有多少个这样的数。  输入 1-12 随意一个数判断是什么季节并打印。  编一个程序，求出 1-6000 之间能够满足“用 3 除余 2，用 5 除余 3，用 7 除余 2”的数，要求每行输出 5 个数。这上面都太简单了，不写了  在不使用第三方变量的情况下，用代码实现变量 ...</div></div></div></a><a class="pagination-related" href="/2020/04/27/C++%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="C++课程设计学习笔记"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-27</div><div class="info-item-2">C++课程设计学习笔记</div></div><div class="info-2"><div class="info-item-1">对上个学期做得课程设计进行一个总结概况：信管在读，其实知乎上对这个专业风评不太好，但我还是选了。我们的 C 语言（其实是 C++ 啦）64 节课，加上程序设计 16 节课，只学到了类和文件读写，也没学派生类，挺可惜的，刚好只能做一个简单的系统。我看华农这个学期貌似也是做这个来当大作业。但很可惜的是，我的大多同学都是直接抄了老师的源代码，连注释都没有改。。。。。。答辩的时候老师都要被气死了。。。  PS:我一直不喜欢部门的值班，因为我是唯一一个早上早起值班的，不过我发现了一本讲 C++的教材，然后极大的帮助了我的课程设计。  总结： 我现在写代码，还是会 C++和 C 混用，比如说 printf 和 cout   验证码：  123456789101112131415#define N 5void passcode(char s[], int n)//验证码模块 char s[]&#123;	char str[] = &quot;0123456789&quot;;	int i, k, le;	le = strlen(str);	srand(time(0));	for (i = 0;...</div></div></div></a><a class="pagination-related" href="/2021/10/14/HTML%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03%E4%B8%8EC%E8%AF%AD%E8%A8%80%E7%9A%84%E5%9B%9E%E9%A1%BE/" title="HTML学习笔记与C语言的回顾"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-14</div><div class="info-item-2">HTML学习笔记与C语言的回顾</div></div><div class="info-2"><div class="info-item-1">HTML：今天碰到了一个 bug，一个同学跟我说他的提交就报 404，我仔细看了下，发现本来应该不变的地址变了。仔细一看原来是form 那里多了空格，导致 HTML 回到了上一级目录自然就报错了。源代码示意： 1234567&lt;form action=&quot; &quot; method=&quot;post&quot;&gt;&lt;/form&gt;&lt;div&gt;  作用是将HTML分成一块块  &lt;a href=&quot;#&quot; on click&gt; #的意思是保留在当前页，on click是单击。&lt;/a&gt;&lt;/div&gt;   C 语言因为操作系统又重新捡起了C语言。有的忘了，但是大多数还记得，虽然我学C的时候其实是学的C++。  12scanf_s(&quot;%d&quot;,&amp;d);	//scanf_s		vs专用，输入的时候d要添加&amp;println(&quot;%d&quot;,d)   ％d 整型输出，％ld 长整型输出，  ％o 以八进制数形式输出整数，  ％x 以十六进制数形式输出整数，  ...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/shuita.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">叶绿素b</div><div class="author-info-description">严肃认真，周到细致，稳妥可靠，万无一失</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Yebingiscn"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Hello World!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">2.</span> <span class="toc-text">项目概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83%E9%80%89%E6%8B%A9"><span class="toc-number">3.</span> <span class="toc-text">编译环境选择</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B"><span class="toc-number">4.</span> <span class="toc-text">编译流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">5.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cargo-apt-curl-%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">6.</span> <span class="toc-text">Cargo apt curl 的对比</span></a></li></ol></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By 叶绿素b</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/click-heart.min.js" async="async" mobile="false"></script></div></body></html>